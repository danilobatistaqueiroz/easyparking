<!DOCTYPE html>
<html>
  <head>
    <title>Simple Map</title>
    <meta name="viewport" content="initial-scale=1.0">
    <meta charset="utf-8">
    <style>
      /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
      #map {
        height: 100%;
      }
      /* Optional: Makes the sample page fill the window. */
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
    </style>
  </head>
  <body>
    <div id="map"></div>
    <script>
      var map;
		function initMap() {
		  var map = new google.maps.Map(document.getElementById('map'), {
			zoom: 8,
			center: {lat: 40.731, lng: -73.997}
		  });
		  var geocoder = new google.maps.Geocoder;
		  var infowindow = new google.maps.InfoWindow;

		  document.getElementById('submit').addEventListener('click', function() {
			geocodeLatLng(geocoder, map, infowindow);
		  });
		}

		function geocodeLatLng(geocoder, map, infowindow) {
			alert('ok');
		  var input = document.getElementById('latlng').value;
		  var latlngStr = input.split(',', 2);
		  var latlng = {lat: parseFloat(latlngStr[0]), lng: parseFloat(latlngStr[1])};
		  geocoder.geocode({'location': latlng}, function(results, status) {
			if (status === 'OK') {
			  if (results[0]) {
				map.setZoom(11);
				var marker = new google.maps.Marker({
				  position: latlng,
				  map: map
				});
				infowindow.setContent(results[0].formatted_address);
				infowindow.open(map, marker);
			  } else {
				window.alert('No results found');
			  }
			} else {
			  window.alert('Geocoder failed due to: ' + status);
			}
		  });
		}
		
		function getLatLng()
		{
			var geocoder = new google.maps.Geocoder();
			var address = document.getElementById('txtAddress').value;

			geocoder.geocode({ 'address': address }, function (results, status) {

				if (status == google.maps.GeocoderStatus.OK) {
					var latitude = results[0].geometry.location.lat();
					var longitude = results[0].geometry.location.lng();
					document.getElementById('geoloc').value = latitude + '.' + longitude;
				}
			});
		}
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB5N7JcG5jyCWIvzzRkQfFx78Vkfw0J54I&callback=initMap"
    async defer></script>
	<BR/>
	<input type="text" id="latlng" value="40.731,-73.997"/>
	<input type="button" id="submit" /><BR/>
	<input type="text" id="txtAddress" value="Rua Cristiano Viana, 1399 - Sao Paulo"/>
	<input type="button" id="ok" onclick="getLatLng();" /><BR/>
	<input type="text" id="geoloc" value=""/>
  </body>
</html>